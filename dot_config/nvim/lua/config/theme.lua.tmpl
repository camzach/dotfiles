local M = {}

local colors = {
  bg = "{{ .color.background }}",
  bg_alt = "{{ .color.surface.variant }}",
  fg = "{{ .color.text.base }}",
  fg_alt = "{{ .color.text.dim }}",
  blue = "{{ .color.primary.base }}",
  green = "{{ .color.success.base }}",
  red = "{{ .color.error.base }}",
  yellow = "{{ .color.warning.base }}",
  purple = "{{ .color.tertiary.base }}",
  cyan = "{{ .color.secondary.base }}",
  orange = "{{ .color.warning.base }}",
}
M.colors = colors

function M.setup()
  local highlights = {
    -- General
    Normal = { fg = colors.fg },
    Visual = { bg = colors.bg_alt },
    CursorLine = { bg = colors.bg_alt },
    ColorColumn = { bg = colors.bg_alt },
    LineNr = { fg = colors.fg_alt },
    CursorLineNr = { fg = colors.fg, bg = colors.bg_alt },

    -- Syntax
    Comment = { fg = colors.purple, italic = true },
    Constant = { fg = colors.cyan },
    String = { fg = colors.green },
    Character = { fg = colors.green },
    Number = { fg = colors.orange },
    Boolean = { fg = colors.orange },
    Float = { fg = colors.orange },
    Identifier = { fg = colors.blue },
    Function = { fg = colors.yellow },
    Statement = { fg = colors.purple },
    Conditional = { fg = colors.purple },
    Repeat = { fg = colors.purple },
    Label = { fg = colors.purple },
    Operator = { fg = colors.fg },
    Keyword = { fg = colors.red },
    Exception = { fg = colors.red },
    Type = { fg = colors.cyan },
    StorageClass = { fg = colors.cyan },
    Structure = { fg = colors.cyan },
    Typedef = { fg = colors.cyan },
    Special = { fg = colors.yellow },
    SpecialChar = { fg = colors.yellow },
    Tag = { fg = colors.red },
    Delimiter = { fg = colors.fg },
    SpecialComment = { fg = colors.purple, italic = true },
    Debug = { fg = colors.red },
    Todo = { fg = colors.yellow, bg = colors.bg, bold = true },

    -- Diffs
    DiffAdd = { bg = "{{ .color.success.dark }}" },
    DiffChange = { bg = "{{ .color.warning.dark }}" },
    DiffDelete = { bg = "{{ .color.error.dark }}" },
    DiffText = { bg = "{{ .color.warning.dark }}" },

    -- LSP
    LspDiagnosticsDefaultError = { fg = colors.red },
    LspDiagnosticsDefaultWarning = { fg = colors.yellow },
    LspDiagnosticsDefaultInformation = { fg = colors.cyan },
    LspDiagnosticsDefaultHint = { fg = colors.green },

    -- Telescope
    TelescopeNormal = { bg = colors.bg },
    TelescopeBorder = { fg = colors.blue, bg = colors.bg },
    TelescopePromptNormal = { bg = colors.bg },
    TelescopePromptBorder = { fg = colors.blue, bg = colors.bg },
    TelescopePromptTitle = { fg = colors.blue, bg = colors.bg },
    TelescopePreviewTitle = { fg = colors.blue, bg = colors.bg },
    TelescopeResultsTitle = { fg = colors.blue, bg = colors.bg },
    TelescopeSelection = { bg = colors.bg_alt },

    -- CMP
    CmpItemAbbr = { fg = colors.fg },
    CmpItemAbbrDeprecated = { fg = colors.red },
    CmpItemAbbrMatch = { fg = colors.blue },
    CmpItemAbbrMatchFuzzy = { fg = colors.blue },
    CmpItemKind = { fg = colors.purple },
    CmpItemMenu = { fg = colors.purple },
  }

  for group, settings in pairs(highlights) do
    vim.api.nvim_set_hl(0, group, settings)
  end

  vim.g.colors_name = "colors"
end

return M

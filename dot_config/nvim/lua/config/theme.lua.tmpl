local M = {}

local colors = {
  bg = "{{ .color.background }}",
  bg_alt = "{{ .color.surface.container }}",
  fg = "{{ .color.text.base }}",
  fg_alt = "{{ .color.text.muted }}",

  primary = "{{ .color.primary.base }}",
  secondary = "{{ .color.secondary.base }}",
  tertiary = "{{ .color.tertiary.base }}",

  error = "{{ .color.error.base }}",
  warning = "{{ .color.warning.base }}",
  success = "{{ .color.success.base }}",

  dim = "{{ .color.text.dim }}",
}
M.colors = colors

function M.setup()
  local highlights = {
    -- General
    Normal = { fg = colors.fg },
    Visual = { bg = colors.bg_alt },
    CursorLine = { bg = colors.bg_alt },
    ColorColumn = { bg = colors.bg_alt },
    LineNr = { fg = colors.fg_alt },
    CursorLineNr = { fg = colors.fg, bg = colors.bg_alt },

    -- Syntax
    Comment = { fg = colors.dim, italic = true },
    Constant = { fg = colors.secondary },
    String = { fg = colors.success },
    Character = { fg = colors.success },
    Number = { fg = colors.warning },
    Boolean = { fg = colors.warning },
    Float = { fg = colors.warning },
    Identifier = { fg = colors.fg },
    Function = { fg = colors.primary },
    Statement = { fg = colors.tertiary },
    Conditional = { fg = colors.tertiary },
    Repeat = { fg = colors.tertiary },
    Label = { fg = colors.tertiary },
    Operator = { fg = colors.fg },
    Keyword = { fg = colors.primary },
    Exception = { fg = colors.error },
    Type = { fg = colors.secondary },
    StorageClass = { fg = colors.secondary },
    Structure = { fg = colors.secondary },
    Typedef = { fg = colors.secondary },
    Special = { fg = colors.tertiary },
    SpecialChar = { fg = colors.tertiary },
    Tag = { fg = colors.primary },
    Delimiter = { fg = colors.fg },
    SpecialComment = { fg = colors.tertiary, italic = true },
    Debug = { fg = colors.error },
    Todo = { fg = colors.warning, bg = colors.bg, bold = true },

    -- Diffs
    DiffAdd = { bg = "{{ .color.success.dark }}" },
    DiffChange = { bg = "{{ .color.warning.dark }}" },
    DiffDelete = { bg = "{{ .color.error.dark }}" },
    DiffText = { bg = "{{ .color.warning.dark }}" },

    -- LSP
    LspDiagnosticsDefaultError = { fg = colors.error },
    LspDiagnosticsDefaultWarning = { fg = colors.warning },
    LspDiagnosticsDefaultInformation = { fg = colors.secondary },
    LspDiagnosticsDefaultHint = { fg = colors.success },

    -- Telescope
    TelescopeNormal = { bg = colors.bg },
    TelescopeBorder = { fg = colors.primary, bg = colors.bg },
    TelescopePromptNormal = { bg = colors.bg },
    TelescopePromptBorder = { fg = colors.primary, bg = colors.bg },
    TelescopePromptTitle = { fg = colors.primary, bg = colors.bg },
    TelescopePreviewTitle = { fg = colors.primary, bg = colors.bg },
    TelescopeResultsTitle = { fg = colors.primary, bg = colors.bg },
    TelescopeSelection = { bg = colors.bg_alt },

    -- CMP
    CmpItemAbbr = { fg = colors.fg },
    CmpItemAbbrDeprecated = { fg = colors.error },
    CmpItemAbbrMatch = { fg = colors.primary },
    CmpItemAbbrMatchFuzzy = { fg = colors.primary },
    CmpItemKind = { fg = colors.tertiary },
    CmpItemMenu = { fg = colors.tertiary },
  }

  for group, settings in pairs(highlights) do
    vim.api.nvim_set_hl(0, group, settings)
  end

  vim.g.colors_name = "colors"
end

return M
